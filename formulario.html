<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Solicitar Orçamento — Lily Zemuner</title>
<meta name="description" content="Formulário de solicitação de orçamento — Lily Zemuner.">
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{font-size:16px;--bg:#fbf8f5;--muted:#7a746c;--accent:#c49b3a;--accent-2:#927033;--ink:#22221f;--radius:.875rem;--max:47.5rem}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui;background:var(--bg);color:var(--ink);padding:28px}
.container{max-width:var(--max);margin:24px auto;background:#fff;border-radius:var(--radius);padding:1.25rem;box-shadow:0 18px 40px rgba(0,0,0,0.05)}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem}
.header img{height:2.5rem}
h1{font-family:"Playfair Display",serif;margin:0 0 .25rem 0;font-size:1.625rem}
.lead{color:var(--muted);margin-bottom:1rem}

/* steps bar */
.steps{display:flex;gap:.5rem;margin-bottom:1rem}
.step-ind{flex:1;height:.375rem;background:#efeae5;border-radius:.375rem}
.step-ind.active{background:linear-gradient(90deg,var(--accent),var(--accent-2))}

/* cards */
.step-card{background:#fff;border-radius:.75rem;padding:1rem;border:1px solid #f0ebe6;margin-bottom:.75rem}
label{display:block;font-weight:700;color:var(--muted);margin-bottom:.5rem}
.input, textarea, select{width:100%;padding:.75rem;border-radius:.625rem;border:1px solid #e7e1da;font-size:1rem;background:#fff}
.radio-grid{display:flex;gap:.75rem;margin-top:.5rem;flex-wrap:wrap}
.option{flex:1;min-width:9rem;padding:.75rem;border-radius:.75rem;border:1px solid #eee;background:#fff;cursor:pointer;font-weight:700;text-align:center;transition:all 180ms ease}
.option.active{border-color:var(--accent);box-shadow:0 12px 30px rgba(176,138,85,0.08);background:linear-gradient(180deg, rgba(176,138,85,0.06), rgba(176,138,85,0.02));color:var(--ink)}
.err{color:#b44336;font-size:.8125rem;min-height:1rem;margin-top:.5rem}
.actions{display:flex;justify-content:space-between;gap:.75rem;margin-top:.75rem}
.btn{padding:.75rem 1rem;border-radius:.75rem;border:0;cursor:pointer;font-weight:700}
.btn-ghost{background:none;color:var(--muted);border:1px solid rgba(0,0,0,0.04)}
.btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff}
.thank{display:none;text-align:center;padding:1rem}

/* accessible focus */
:focus{outline:3px solid rgba(196,155,58,0.16);outline-offset:3px}

@media(max-width:640px){body{padding:18px}.container{padding:.75rem}}
</style>
</head>
<body>
<div class="container" role="main" aria-labelledby="formTitle">
  <div class="header">
    <div style="display:flex;align-items:center;gap:.75rem">
      <img src="assets/images/logo.png" alt="Lily Zemuner">
      <div style="font-family:Playfair Display,serif;font-weight:600">Solicitar Orçamento</div>
    </div>
    <a href="index.html" style="text-decoration:none;color:var(--muted)">Voltar</a>
  </div>

  <h1 id="formTitle">Solicitar Orçamento</h1>
  <p class="lead">Preencha as etapas. Ao finalizar você será redirecionado ao WhatsApp com as informações.</p>

  <div class="steps" aria-hidden="true">
    <div class="step-ind active" data-index="0"></div>
    <div class="step-ind" data-index="1"></div>
    <div class="step-ind" data-index="2"></div>
    <div class="step-ind" data-index="3"></div>
    <div class="step-ind" data-index="4"></div>
    <div class="step-ind" data-index="5"></div>
  </div>

  <!-- JavaScript-enhanced form; includes non-JS fallback below -->
  <form id="form" method="post" action="#" novalidate>
    <!-- STEP 0 -->
    <div class="step-card" data-step="0">
      <label for="nome">Nome completo</label>
      <input id="nome" name="nome" class="input" type="text" autocomplete="name" required aria-required="true" />
      <div class="err" aria-live="polite"></div>
    </div>

    <!-- STEP 1 -->
    <div class="step-card" data-step="1" hidden>
      <label>Tipo de projeto</label>
      <div class="radio-grid" role="radiogroup" aria-label="Tipo de projeto">
        <div tabindex="0" role="radio" aria-checked="false" class="option" data-value="Casa nova">Casa nova</div>
        <div tabindex="0" role="radio" aria-checked="false" class="option" data-value="Reforma">Reforma</div>
      </div>
      <div class="err" aria-live="polite"></div>
    </div>

    <!-- STEP 2 -->
    <div class="step-card" data-step="2" hidden>
      <label for="local">Local do projeto (cidade / bairro)</label>
      <input id="local" name="local" class="input" type="text" autocomplete="address-level2" required />
      <div class="err" aria-live="polite"></div>
    </div>

    <!-- STEP 3 (investimento) -->
    <div class="step-card" data-step="3" hidden>
      <label>Faixa de investimento estimada para a execução completa da obra</label>
      <div class="radio-grid" role="radiogroup" aria-label="Faixa de investimento estimada para a execução completa da obra">
        <div tabindex="0" role="radio" aria-checked="false" class="option" data-value="Menos de R$ 500 mil">Menos de R$ 500 mil</div>
        <div tabindex="0" role="radio" aria-checked="false" class="option" data-value="R$ 500 mil a R$ 1 milhão">R$ 500 mil a R$ 1 milhão</div>
        <div tabindex="0" role="radio" aria-checked="false" class="option" data-value="R$ 1 milhão a R$ 5 milhões">R$ 1 milhão a R$ 5 milhões</div>
        <div tabindex="0" role="radio" aria-checked="false" class="option" data-value="Mais de R$ 5 milhões">Mais de R$ 5 milhões</div>
      </div>
      <div class="err" aria-live="polite"></div>
    </div>

    <!-- STEP 4 -->
    <div class="step-card" data-step="4" hidden>
      <label>Deseja adicionar alguma observação?</label>
      <div class="radio-grid" role="radiogroup" aria-label="Adicionar observação">
        <div tabindex="0" role="radio" aria-checked="false" class="option" data-value="sim">Sim</div>
        <div tabindex="0" role="radio" aria-checked="false" class="option" data-value="nao">Não</div>
      </div>
      <div class="err" aria-live="polite"></div>
    </div>

    <!-- STEP 5 -->
    <div class="step-card" data-step="5" hidden>
      <label for="mensagem">Observações</label>
      <textarea id="mensagem" name="mensagem" class="input" rows="5" placeholder="Digite sua observação"></textarea>
      <div class="err" aria-live="polite"></div>
    </div>

    <div class="actions" role="group" aria-label="Ações do formulário">
      <button type="button" id="back" class="btn btn-ghost">Voltar</button>
      <button type="button" id="next" class="btn btn-primary">Continuar</button>
    </div>
  </form>

  <!-- Non-JS fallback -->
  <noscript>
    <div style="margin-top:1rem;padding:1rem;border-radius:.5rem;background:#fff;border:1px solid #eee">
      <p style="margin:0 0 .5rem 0;color:#7a746c">Parece que seu navegador não permite scripts. Para solicitar um orçamento, envie um e-mail para <a href="mailto:contato@lilyzemuner.com">contato@lilyzemuner.com</a> ou envie uma mensagem via WhatsApp para +55 11 99487-3720.</p>
    </div>
  </noscript>

  <div class="thank" id="thank" role="status" aria-live="polite" hidden>
    <h2 style="font-family:Playfair Display,serif">Obrigada</h2>
    <p style="color:var(--muted)">Seu pedido foi preparado. Você será direcionado ao WhatsApp.</p>
    <div style="margin-top:.75rem"><a class="btn btn-ghost" href="index.html">Voltar ao início</a></div>
  </div>
</div>

<script>
(function(){
  const steps = Array.from(document.querySelectorAll('[data-step]'));
  const indicators = Array.from(document.querySelectorAll('.step-ind'));
  const nextBtn = document.getElementById('next');
  const backBtn = document.getElementById('back');
  const form = document.getElementById('form');
  const thank = document.getElementById('thank');

  let current = 0;
  const selection = { tipo:'', investimento:'', desejaObservacao:'', mensagem:'' };

  function show(i){
    steps.forEach(s => s.hidden = Number(s.dataset.step) !== i);
    indicators.forEach((ind, idx)=> ind.classList.toggle('active', idx <= i));
    const focusable = steps[i].querySelector('input, textarea, .option, select');
    if(focusable) focusable.focus();
    backBtn.style.visibility = i === 0 ? 'hidden' : 'visible';
    nextBtn.textContent = i === (steps.length - 1) ? 'Enviar' : 'Continuar';
  }
  show(0);

  // Option handling
  document.querySelectorAll('.option').forEach(opt=>{
    opt.addEventListener('click', ()=> {
      const group = opt.parentNode;
      group.querySelectorAll('.option').forEach(o => {
        o.classList.remove('active'); o.setAttribute('aria-checked','false');
      });
      opt.classList.add('active'); opt.setAttribute('aria-checked','true');

      const stepCard = opt.closest('[data-step]');
      const stepIdx = Number(stepCard.dataset.step);
      const val = opt.dataset.value;
      if(stepIdx === 1) selection.tipo = val;
      if(stepIdx === 3) selection.investimento = val;
      if(stepIdx === 4) selection.desejaObservacao = val;
    });
    opt.addEventListener('keydown', (e)=> {
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); opt.click(); }
    });
  });

  function setError(stepIndex, message){
    const step = steps.find(s => Number(s.dataset.step) === stepIndex);
    if(!step) return;
    const err = step.querySelector('.err');
    err.textContent = message || '';
    const input = step.querySelector('input, textarea, select');
    if(input) input.setAttribute('aria-invalid', message ? 'true' : 'false');
  }

  function validateStep(i){
    setError(i,'');
    if(i === 0){
      const nome = document.getElementById('nome');
      if(!nome.value.trim()){ setError(i,'Campo obrigatório.'); nome.focus(); return false; }
    }
    if(i === 1){
      if(!selection.tipo){ setError(i,'Selecione uma opção.'); return false; }
    }
    if(i === 2){
      const local = document.getElementById('local');
      if(!local.value.trim()){ setError(i,'Campo obrigatório.'); local.focus(); return false; }
    }
    if(i === 3){
      if(!selection.investimento){ setError(i,'Selecione uma faixa de investimento.'); return false; }
    }
    if(i === 4){
      if(!selection.desejaObservacao){ setError(i,'Selecione Sim ou Não.'); return false; }
    }
    return true;
  }

  nextBtn.addEventListener('click', ()=> {
    if(current === 4 && selection.desejaObservacao === 'nao'){ enviar(); return; }

    if(!validateStep(current)) return;

    if(current < steps.length - 1){ current++; show(current); return; }
    enviar();
  });

  backBtn.addEventListener('click', ()=> { if(current>0){ current--; show(current); } });

  document.getElementById('mensagem').addEventListener('input', (e)=> selection.mensagem = e.target.value.trim());

  document.querySelectorAll('[data-step="4"] .option').forEach(opt=>{
    opt.addEventListener('click', ()=>{
      if(opt.dataset.value === 'sim'){ current = 5; show(current); }
      else if(opt.dataset.value === 'nao'){ enviar(); }
    });
  });

  function enviar(){
    if(!validateStep(0) || !validateStep(1) || !validateStep(2) || !validateStep(3) || !validateStep(4)) return;

    const nome = document.getElementById('nome').value.trim();
    const local = document.getElementById('local').value.trim();
    const tipo = selection.tipo || '';
    const investimento = selection.investimento || '';
    const desejaObs = selection.desejaObservacao || '';
    const mensagem = selection.mensagem || (desejaObs === 'nao' ? 'Nenhuma' : '');

    const lines = [
      'Olá, gostaria de solicitar um orçamento de projeto.',
      '',
      'Nome: ' + nome,
      'Tipo de projeto: ' + tipo,
      'Local do projeto: ' + local,
      'Faixa de investimento: ' + investimento,
      'Deseja adicionar observação: ' + (desejaObs === 'sim' ? 'Sim' : 'Não'),
      'Observações: ' + (mensagem || 'Nenhuma')
    ];

    const text = encodeURIComponent(lines.join('\n'));
    const phone = '5511994873720';

    form.style.display = 'none';
    thank.hidden = false;
    window.open('https://api.whatsapp.com/send?phone=' + phone + '&text=' + text, '_blank');
  }

  // Enter to advance (not in textarea)
  form.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){
      const tag = document.activeElement.tagName.toLowerCase();
      if(tag === 'textarea') return;
      e.preventDefault();
      nextBtn.click();
    }
  });
})();
</script>
</body>
</html>

